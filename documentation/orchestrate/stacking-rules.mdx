---
title: "Stacking rules"
description: "Control how multiple incentives behave in a single request"
keywords: ['stacking rules', 'discount stacking', 'application order', 'validation policy', 'discount calculation', 'stack limits']
tag: "NEW"
---

import StackingRulesAccess from 'snippets/callouts/note-stacking-rules-access.mdx'

<StackingRulesAccess/>

Stacking rules define how multiple incentives are processed together in one validation or redemption request.

They help you control:
- What happens when one incentive is invalid
- The order in which incentives are applied
- How percentage discounts are calculated
- How incentives interact on the same product
- What happens during rollback
- What happens when an incentive has no effect
- How many incentives can be applied at once

To set stacking rules, go to **Campaign hub** > **Stacking rules** and select **Stacking settings**.

<StackingRulesAccess/>

## Application and sorting

These settings define how incentives are ordered, validated, and redeemed.

### Redemption stack validation policy

This setting defines what happens if one incentive in a request fails validation:
- **All**: If one incentive is invalid, the whole request fails. No incentives are applied.
- **Partial**: Invalid incentives are skipped. Valid incentives are applied.

### Incentive application order

This setting defines the order in which incentives are applied:
- **Requested order**: Incentives are applied in the same order as they appear in the API request.
- **Hierarchy priority**: Incentives are applied based on category hierarchy. A lower hierarchy number means higher priority. If two incentives have the same hierarchy, the request order is used.

### Always stackable and Never stackable category application order

This setting defines how incentives from Always stackable and Never stackable categories are ordered:
- **Apply Always stackable categories last**: Never stackable incentives are applied first. Always stackable incentives are applied afterward. In effect, this setting ignores the hierarchies of the Always stackable and Never stackable categories when incentives from these categories are used together.
- **Apply sorting rule to combined Always stackable and Never stackable categories**: All incentives are grouped together. The selected **Incentive application order** defines their application order.

### Discount calculation mode

This setting defines how percentage discounts are calculated when multiple incentives are applied:
- **Based on discounted amount**: Each discount is calculated after previous discounts are applied.
- **Based on initial amount**: Each discount is calculated from the original price.

## Discount behavior

These settings define how incentives behave on products and during rollback.

### Product stack policy

This setting defines if multiple incentives can affect the same product:
- **Multiple application**: More than one incentive can affect the same product.
- **Single application**: Only one incentive can affect the same product. The incentive is applied according to the **Incentive application order**.

### Redemption rollback policy

This setting defines what happens when a redemption is rolled back:
- **Revert**: Applied discounts are removed. The order status changes to **Canceled**.
- **Keep**: Applied discounts remain, preserving the order history. The order status does not change.

<Tip>

    **Keep** is a good setting for handling refunds, as you have detailed data regarding applied discounts and other incentive use.

</Tip>

### No effect

This setting defines what happens when an incentive produces no effect:
- **Force redemption**: The incentive is marked as redeemed even if it produces no effect.
- **Prevent redemption**: The incentive is redeemed only when it produces an effect.

<Info>

    No effect usually occurs if a discount coupon is used together with a cart promotion and one of them results in applying a 0 discount.

    No effect may also happen when a loyalty card is used to pay with points, but in combination with other discounts it doesn't take effect and no points are used.

</Info>

## Global limits

These settings define how many incentives can be processed in one request.

### Maximum number of incentives in a request

Defines how many incentives can be sent in one API request. Maximum value: 30.

### Maximum number of valid incentives to apply in a request

Defines how many valid incentives can be applied. Maximum value: 30.

### Maximum number of valid incentives per category to apply in a request

This setting is optional and defines how many incentives from the same category can be applied. Maximum value: 30.

### Maximum number of valid Never stackable incentives to apply in a request

Defines how many Never stackable incentives can be applied at the same time. Maximum value: 5.

### Maximum number of valid Never stackable incentives per category to apply in a request

This setting is optional and defines how many Never stackable incentives from the same category can be applied. Maximum value: 5.
