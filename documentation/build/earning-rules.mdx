---
title: "Earning rules"
description: "A complete guide to earning rules, including types, limits, and configuration parameters in Voucherify"
---

## Detailed earning rule configuration fields

The process of creating an earning rule is divided into four distinct steps, each defining key parameters that govern the rule's functionality and scope.

### 1. Details (required)

This section defines the rule's identification and lifecycle management.

* **Name:** The unique name of the earning rule, used for management and reporting.
* **Time frame (optional):** Defines the period during which the rule is active.
    * **Inheritance:** If a time frame is not explicitly specified, the rule **inherits** the start and expiration date from the parent loyalty campaign.
    * **Time frame options**:
        * Start date & time
        * End date & time (expiration)
        * Valid in this timeframe only (recurring)
        * Valid on particular days only

### 2. Points (required)

This section defines the reward value, timing, and expiration rules for the points earned.

* **Point value:** Determines how many loyalty points the customer will receive.
    * It can be a **fixed value** (e.g., 50 points) or a **dynamic value** calculated using the **points formula builder**.
* **Pending points:** This feature allows you to delay the moment points are officially credited.
    * You can set a specific **pending period in days**.
    * Points are added to the customer's account immediately but remain in a *Pending* state. Once the configured number of days has passed, the points are automatically **credited** to the customer.
* **Expiration rules:** Configuration defining when the points acquired through this specific earning rule will expire.

### 3. Validation rules (optional)

Validation rules are advanced constraints that must be met for the earning rule to activate.

* **Function:** They limit earning rule usage to predefined circumstances.
* **Examples of application:** Validation rules can define:
    * Cart structure and volume (e.g., minimum order value)
    * Customer attributes (e.g., only for customers in country X)
    * Qualified customer segments (e.g., only for the "Premium Customers" segment)

### 4. Metadata (optional)

Metadata allows you to attach custom attributes to the earning rule by defining key/value pairs.

* **Function:** This is used to add custom attributes for internal tracking, organization, or for use in more advanced logic.

---

## Context for point earning by rule type

This section explains how points are calculated and awarded for each rule type, focusing on **proportional earning** and required **metadata schema**.

### A. Paid orders

Points are added to the customer's loyalty card when a new order changes its status to **PAID**.

| Earning method | Detailed functionality | Metadata requirements |
| :--- | :--- | :--- |
| **Fixed** | Awards a fixed number of points for paying an order. | None |
| **Proportional** | The customer receives a defined number of points (*X*) for every predefined value (*Y*) in the selected metric (e.g., amount spent). | The metadata field must be a **Number** type and defined earlier in **Project Settings > Metadata Schema**. |

#### Proportional earning options for orders

1.  **Pre-discount order amount:** Points for every $Y$ spent **excluding** discounts (order total amount counted *before* discounts were applied).
2.  **Total order amount:** Points for every $Y$ spent **including** discounts (order total amount counted *after* discounts were applied).
3.  **Pre-discount amount spent on items:** Points for every $Y$ spent on specific items or collections, **excluding** discounts.
4.  **Amount spent on items:** Points for every $Y$ spent on specific items or collections, **including** discounts.
5.  **Quantity of items in the cart:** Points for every $Y$ items, **excluding** free items.
6.  **Order Metadata:** Points awarded proportionally to the value of a metadata attribute defined in the **Order** schema.
7.  **Customer Metadata:** Points awarded proportionally to the value of a metadata attribute defined in the **Customer** schema.

<Tip>

When selecting multiple products or collections for proportional earning, if the same item belongs to multiple selected collections, points will be calculated based on eligible items **only once**.

</Tip>

### B. Custom events

Custom events are actions taken by your customers that are tracked in your application/website and passed to Voucherify using the API.

* **Pre-configuration:** Events must first be defined in **Project Settings > Event Schema**.
* **Function:** The customer receives points every time they perform the required action (the custom event is sent to and received by Voucherify).
* **Validation:** When an event is received, the application checks if the customer linked to the event matches the segment rules, customer metadata, and/or custom event metadata rules.

#### Point Earning Options

* **Fixed** number of points.
* **Proportional** to a value in selected metadata.
    * **Customer metadata**: Value comes from a metadata attribute defined in the **Customer schema**.
    * **Custom event metadata**: Value comes from a metadata attribute defined as a property of the chosen event in the **Event schema**.

<Warning>

Sending custom events to Voucherify **requires developer implementation** and use of the **Events API**.

</Warning>

### C. Entered segment

Segments group customers based on predefined criteria.

* **Function:** Customers who match the segment rules **enter** the segment and **immediately** earn loyalty points.
* **Conditions:** Points are assigned only if **all** segment conditions (defined beforehand in the **Customers** section) are met.

#### Point earning options

* **Fixed** number of points.
* **Proportional** to a value in Customer metadata.
    * The metadata must be defined in the **Customer** schema and must be a **Number** type.

### D. Tier structure events

Tiers are different membership levels in the loyalty program, defined by a minimum and maximum point range.

* **Function:** Points are added when a specific tier-related change occurs, provided all related event conditions are met.
* **Requirement:** The rule must be built upon existing tiers defined in the **Tiers** section.

#### Types of tier events and point earning

| Tier event trigger | Moment points are awarded |
| :--- | :--- |
| **Joined tiers structure** | Customer first joins the tier structure. |
| **Left tiers structure** | Customer leaves the tier structure. |
| **Tier upgraded** | Customer's tier level increases. |
| **Tier downgraded** | Customer's tier level decreases. |
| **Tier prolonged** | Customer's current tier level is extended. |

**Point Earning** can be **fixed** or **proportional** to a Customer metadata value (which must be a **Number** type).