![Voucherify Ruby SDK](./voucherify-ruby-sdk.png)

<h3 align="center">Official <a href="https://www.voucherify.io">Voucherify</a> Ruby SDK</h3>

[![Gem Version](https://img.shields.io/gem/v/voucherify.svg)](https://rubygems.org/gems/voucherify)
[![Gem Downloads](https://img.shields.io/gem/dt/voucherify.svg)](https://rubygems.org/gems/voucherify)
[![License](https://img.shields.io/github/license/voucherifyio/sdk-ruby-openapi-based.svg)](https://opensource.org/licenses/MIT)
[![GitHub issues](https://img.shields.io/github/issues/voucherifyio/sdk-ruby-openapi-based.svg)](https://github.com/voucherifyio/voucherify-ruby-sdk/issues)

## üëã Intro

Voucherify is an Incentive Optimization Engine that helps digital teams launch, test, and optimize targeted incentives ‚Äì from coupons and promotions to loyalty programs and personalized offers ‚Äì all with API.

We build Voucherify so you can run fewer incentives, but better ones.

**Launch fast.**

**Test every day.**

**Drop what doesn‚Äôt work.**

**And optimize what does.**

Integrate easily with your existing stack to make experimentation and optimization effortless.

## üìù Useful info

This SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) based on Voucherify [API reference](https://docs.voucherify.io/api-reference/introduction-api), `v2018-08-01` version.

For more info, here are some useful places to visit:
- ‚úÖ [Supported endpoints](./ENDPOINTS-COVERAGE.md).
- üìò [API docs](https://docs.voucherify.io/api-reference/introduction-api "Voucherify API documentation").
- üßë‚Äçüç≥ [Promotion cookbook](https://www.voucherify.io/promotion-examples "Explore promotion examples").
- üí¨ [Help center](https://support.voucherify.io "Voucherify dashboard documentation").
- üêõ Caught a bug? [Add an issue](https://github.com/voucherifyio/voucherify-ruby-sdk/issues "Visit issues in Voucherify Ruby SDK")!
- üßë‚Äçüíª Need help? [Contact support](https://www.voucherify.io/contact-support "Visit contact support page").

## ‚öôÔ∏è Install

Use any of the following methods to install the SDK.

### Gem repository

The SDK is hosted in [RubeGems](https://rubygems.org/gems/voucherify). Add this line to your application's Gemfile:

```ruby
gem 'voucherify'
```

Then run:

```shell
bundle install
```

### Manual installation

Optionally, run:

```shell
gem install voucherify
```

## üîí Get your keys and address

Get your Voucherify keys for valid authorization and setting the basePath (cluster) to match your server URL:
1. In Voucherify dashboard, go to **Project settings**.
2. In **Application information**, find your basePath (cluster) address. For shared clusters:
   - Europe (default): `https://api.voucherify.io`
   - United States: `https://us1.api.voucherify.io`
   - Asia (Singapore): `https://as1.api.voucherify.io`
3. Scroll down to **Application Keys** to grab your Application ID and Secret key.


## üöÄ Run code

Once installed, you can use pre-created [example.rb](./example.rb) with code for testing.

```ruby example.rb
# Load the gem
require 'VoucherifySdk'

# Setup authorization
VoucherifySdk.configure do |config|
    # Configure API key authorization: X-App-Id
    config.api_key['X-App-Id'] = 'YOUR API KEY'

    # Configure API key authorization: X-App-Token
    config.api_key['X-App-Token'] = 'YOUR API KEY'

    # (Optional) Configure Voucherify cluster, default is https://api.voucherify.io
    # config.host = 'https://us1.api.voucherify.io'
end

# Creating API Instance
api_instance = VoucherifySdk::CampaignsApi.new

# Calling list_campaigns
begin
    result = api_instance.list_campaigns()
    puts result
rescue VoucherifySdk::ApiError => e
    puts "Exception when calling VouchersApi->list_campaigns: #{e}"
end
```

You can run the code from the directory where the file is placed (root for this repository):

```shell
ruby example.rb
```

Optionally, if you're using bundler, run:

```shell
bundle exec ruby example.rb
```

> [!NOTE]
>
> This code just lists campaigns, so it won't affect your Voucherify data.

Once set up, check the following methods to give Voucherify a more interesting spin:
- [Validations](docs/ValidationsApi.md#validateStackedDiscounts)
- [Redemptions](docs/RedemptionsApi.md#redeemStackedDiscounts)
- [Publications](docs/PublicationsApi.md#createPublication)

> [!TIP]
>
> Check the test implementation in the [Test folder](./__tests__/) and the [Examples file](./EXAMPLES.md).

## üê≥ Run local tests with docker

1. Copy `.env.example` to `.env` and fill in the values.
2. Run `docker build -t ruby .` to build the image.
3. Run `docker run --rm ruby` to run the tests and delete container immediately after.

## üõ†Ô∏è Contribute

Do you want to contribute?

Read more about how to contribute to this SDK in the [Contributing guide](https://github.com/voucherifyio/voucherify-openapi/blob/master/GENERATING-SDKS.md) in the main repo.

This SDK is auto-generated (except for tests), so changes made here will be overwritten by the generator.

## üîê Authorization

Authorization schemes defined for the API.

```ruby
# Setup authorization
VoucherifySdk.configure do |config|
    # Application Keys
    config.api_key['X-App-Id'] = 'YOUR API ID'
    config.api_key['X-App-Token'] = 'YOUR API TOKEN'

    # Client-side Keys
    config.api_key['X-Client-Application-Id'] = 'YOUR CLIENT API ID'
    config.api_key['X-Client-Token'] = 'YOUR CLIENT API TOKEN'

    # Cluster (Optional)
    # default is https://api.voucherify.io
    config.host = 'https://us1.api.voucherify.io'
end
```

### X-App-Id

- **Type**: API key
- **API key parameter name**: X-App-Id
- **Location**: HTTP header

### X-App-Token

- **Type**: API key
- **API key parameter name**: X-App-Token
- **Location**: HTTP header

### X-Client-Token

- **Type**: API key
- **API key parameter name**: X-Client-Token
- **Location**: HTTP header

### X-Client-Application-Id

- **Type**: API key
- **API key parameter name**: X-Client-Application-Id
- **Location**: HTTP header

### X-Management-Id

- **Type**: API key
- **API key parameter name**: X-Management-Id
- **Location**: HTTP header

### X-Management-Token

- **Type**: API key
- **API key parameter name**: X-Management-Token
- **Location**: HTTP header

## üìÖ Changelog

- **2024-01-29** - `8.0.3`
  - Added support for **GET** /v1/loyalties/{campaignId}/pending-points
  - Added support for **GET** /v1/loyalties/members/{memberId}/pending-points
  - Added support for **GET** /v1/loyalties/{campaignId}/members/{memberId}/pending-points
  - Added support for **POST** /v1/loyalties/members/{memberId}/pending-points/{pendingPointsId}/activate
  - Added support for **POST** /v1/loyalties/members/{memberId}/pending-points/{pendingPointsId}/cancel
  - Added types for pending points (loyalties) and access settings (areas and stores)
- **2024-11-26** - `8.0.2`
  - Added support for `STANDALONE` campaign type.
  - Added optional `metadata` in `OrderCalculatedItemSku`
  - New possible value of `ParameterExpandListCampaigns`
  - New optional `error` parameter in `Error`
  - Updated `LoyaltyCardTransactionDetailsBalance`
- **2024-11-04** - `8.0.1`
  - Added support for returning `campaign_id` and `campaign_name` in stackable validation endpoint, when `redeemable` option is expanded
- **2024-10-28** - `8.0.0`
  - Added missing `enums` in few filters models
  - !!! BREAKING CHANGES !!!
    - VouchersApi.generateRandomCode now requires `VouchersCreateResponseBody` instead of plain `object`
    - property `product` in model `Discount` now uses `DiscountProduct` instead of `SimpleProductDiscountUnit`
    - property `filters` of model `ExportsCreateRequestBodyParameters` now uses plain `object` instead of `ExportsCreateRequestBodyParametersFilters`
- **2024-10-25** - `7.0.0`
  - Fix object parsing in query. For example `filters` while listing redemptions.
  - !!! BREAKING CHANGES !!!
    - Remove support for `/v1/customers/{customerId}/consents` - put `Update Customer's consents [Deprecated]`
    - Remove support for `/v1/consents` - get `List Consents [Deprecated]`
    - Remove support for `/client/v1/customers/{customerId}/consents` - put `Update Customer's consents (client-side) [Deprecated]`
    - Pagination changed on listing card transactions(listLoyaltyCardTransactions) - NO `page` param is supported - use `starting_after_id` instead.
    - Pagination changed on listing voucher transactions(listVoucherTransactions) - NO `page` param is supported - use `starting_after_id` instead.
    - ApplicableToEffect - changed - `EVERY` -> `TO_EVERY`, `CHEAPEST` -> `TO_CHEAPEST`, `MOST_EXPENSIVE` -> `TO_MOST_EXPENSIVE`, 2 new values introduced.
    - `listPublications` parameter `filters` have changed - now uses `ParameterFiltersListPublications` instead of `String`
    - `ParameterFiltersListRedemptions` and `ParameterFiltersListCustomerRedeemables` have been updated
    - enum `LUCKY_DRAW`, `LUCKY_DRAW_CODE`, `VOUCHER_LUCKY_DRAW_CODE`, `CAMPAIGN_LUCKY_DRAW` have been deleted from everywhere and no longer supported
    - CampaignsUpdateRequestBody - properties `activityDurationAfterPublishing`, `joinOnce`, `autoJoin`, `type`, `uniqueWinners`, `uniqueWinnersPerDraw` and enum `AUTO_UPDATE` | `STATIC` have been deleted and no longer supported
    - `updateCustomersConsents` has been deleted and no longer supported
    - `FilterConditionsDateTimeConditions` model has been renamed to `FilterConditionsDateTime`
    - FilterConditionsDateTime - `conditions` has been divided on `$after`, `$before`, `$hasValue`, `$isUnknown`, `moreThan`, `lessThan` properties
    - ParamterFiltersListCustomerRedeemables - model name of `createdAt` has been renamed from `FilterConditionsDateTime` to `ParameterFiltersListCustomerRedeemablesCreatedAt`
    - `filter` property in schemas ProductCollectionsCreateRequestBody, ProductCollectionsCreateResponseBody, ProductCollectionsItem and ProductCollectionsGetResponseBody has changed. Uses plain `object`.
    - `discount` property in schema CampaignsUpdateRequestBody now uses `Discount` model
    - properties `winnersCount`, `uniqueWinnersPerDraw`, `uniqueWinners` in model `CampaignsUpdateRequestBody` were deleted.
    - property `stackingRulesType` were deleted from models `CategoriesGetResponseBody`, `Category`
    - property `categories` in model `ClientValidationsValidateResponseBodyRedeemablesItem` uses now Array<CategoryWithStackingRulesType> model
    - model `ParameterFiltersListCustomerRedeemablesCampaignId` has been fixed, can use junction properly.
    - model `ParameterFiltersListRedemptions` has been fixed, can use junction properly.
    - property `filter` in model `ProductCollectionsCreateRequestBody` now uses plain Object
    - property `categories` in model `QualificationsRedeemable` now uses `Array<CategoryWithStackingRulesType>`
  - Added support:
    - /v1/metadata-schemas - get `List Metadata Schemas`
    - /v1/metadata-schemas/{resource} - get `Get Metadata Schema`
    - /v1/locations - `List Locations`
    - /v1/locations/{locationId} - get `Get Location`
    - /v1/referrals/{campaignId}/members/{memberId}/holders - post `Add Referral Code Holders`
    - /v1/referrals/{campaignId}/members/{memberId}/holders - get `List Referral Code Holders`
    - /v1/referrals/{campaignId}/members/{memberId}/holders/{holderId} - delete `Remove Referral Card Holder`
    - /v1/referrals/members/{memberId}/holders - post `Add Referral Code Holders`
    - /v1/referrals/members/{memberId}/holders - get `List Referral Code Holders`
    - /v1/referrals/members/{memberId}/holders/{holderId} - delete `Remove Referral Card Holder`
    - /v1/trash-bin - get `List Bin Entries`
    - /v1/trash-bin/{binEntryId} - delete `Delete Bin Entry`
    - /v1/templates/campaigns - get `List Campaign Templates`
    - /v1/templates/campaigns - post `Create Campaign Template`
    - /v1/templates/campaigns/{campaignTemplateId} - get `Get Campaign Template`
    - /v1/templates/campaigns/{campaignTemplateId} - put `Update Campaign Template`
    - /v1/templates/campaigns/{campaignTemplateId} - delete `Delete Campaign Template`
    - /v1/templates/campaigns/{campaignTemplateId}/campaign-setup - post `Create Campaign From Template`
    - /v1/templates/campaigns/{campaignTemplateId}/tier-setup - post `Add Promotion Tier From Template`
    - /management/v1/projects - post `Create Project`
    - /management/v1/projects - get `List Projects`
    - /management/v1/projects/{projectId} - get `Get Project`
    - /management/v1/projects/{projectId} - put `Update Project`
    - /management/v1/projects/{projectId} - delete `Delete Project`
    - /management/v1/projects/{projectId}/users - post `Assign User`
    - /management/v1/projects/{projectId}/users/{userId} - put `Update User`
    - /management/v1/projects/{projectId}/users/{userId} - delete `Unassign User`
    - /management/v1/projects/users/invite - post `Invite a New User`
    - /management/v1/projects/{projectId}/templates/campaigns - get `List Campaign Templates`
    - /management/v1/projects/{projectId}/templates/campaigns/{campaignTemplateId}/copy - post `Copy Campaign Template to a Project`
    - /management/v1/projects/{projectId}/stacking-rules - post `Create Stacking Rules`
    - /management/v1/projects/{projectId}/stacking-rules - get `List Stacking Rules`
    - /management/v1/projects/{projectId}/stacking-rules/{stackingRulesId} - get `Get Stacking Rules`
    - /management/v1/projects/{projectId}/stacking-rules/{stackingRulesId} - put `Update Stacking Rules`
    - /management/v1/projects/{projectId}/stacking-rules/{stackingRulesId} - delete `Delete Stacking Rules`
    - /management/v1/projects/{projectId}/metadata-schemas - post `Create Metadata Schema`
    - /management/v1/projects/{projectId}/metadata-schemas - get `List Metadata Schemas`
    - /management/v1/projects/{projectId}/metadata-schemas/{metadataSchemaId} - get `Get Metadata Schema`
    - /management/v1/projects/{projectId}/metadata-schemas/{metadataSchemaId} - put `Update Metadata Schema`
    - /management/v1/projects/{projectId}/metadata-schemas/{metadataSchemaId} - delete `Delete Metadata Schema`
    - /management/v1/projects/{projectId}/custom-event-schemas - post `Create Custom Event Schema`
    - /management/v1/projects/{projectId}/custom-event-schemas - get `List Custom Event Schemas`
    - /management/v1/projects/{projectId}/custom-event-schemas/{customEventSchemaId} - get `Get Custom Event Schema`
    - /management/v1/projects/{projectId}/custom-event-schemas/{customEventSchemaId} - put `Update Custom Event Schema`
    - /management/v1/projects/{projectId}/custom-event-schemas/{customEventSchemaId} - delete `Delete Custom Event Schema`
    - /management/v1/projects/{projectId}/webhooks - post `Create Webhook`
    - /management/v1/projects/{projectId}/webhooks - get `List Webhooks`
    - /management/v1/projects/{projectId}/webhooks/{webhookId} - get `Get Webhook`
    - /management/v1/projects/{projectId}/webhooks/{webhookId} - put `Update Webhook`
    - /management/v1/projects/{projectId}/webhooks/{webhookId} - delete `Delete Webhook`
    - /management/v1/projects/{projectId}/branding - post `Create Brand`
    - /management/v1/projects/{projectId}/branding - get `List Brands`
    - /management/v1/projects/{projectId}/branding/{brandingId} - get `Get Brand`
    - /management/v1/projects/{projectId}/branding/{brandingId} - put `Update Brand`
    - /management/v1/projects/{projectId}/branding/{brandingId} - delete `Delete Brand`
- **2024-09-05** - `6.0.0` - The new version of the SKD includes coverage for all the most commonly used Voucherify endpoints and supports typed models.

*Previous versions of the SDK are no longer supported. We highly recommend upgrading to version 6.0.0 or newer, as it is now designated as Long-Term Support (LTS).*

*Changelog for previous versions is in the [DEPRECATED_CHANGELOG.md file](./DEPRECATED_CHANGELOG.md).*

## üåê Documentation of API endpoints

All URIs are relative to *{{basePath}}*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
{{#apiInfo}}{{#apis}}{{#operations}}{{#operation}}*{{moduleName}}::{{classname}}* | [**{{operationId}}**]({{apiDocPath}}{{classname}}.md#{{operationId}}) | **{{httpMethod}}** {{path}} | {{{summary}}}
{{/operation}}{{/operations}}{{/apis}}{{/apiInfo}}

## üìö Documentation for Models

{{#models}}{{#model}} - [{{moduleName}}::{{classname}}]({{modelDocPath}}{{classname}}.md)
{{/model}}{{/models}}
